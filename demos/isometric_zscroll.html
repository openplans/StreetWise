<html>
  <head>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>

    <style>
      body {
        background-color: SkyBlue;
        margin: 0px;
        padding: 0px;
      }

      #isometric-scene {
        position: relative;
        width: 100%;
        height: 36000px;
        overflow: hidden;
      }
      #isometric-scene > div.bg {
        position: fixed;
        width: 640px;
        height: 640px;
        border: 1px solid black;
        background: url("test_bg.png");
      }

      #isometric-scene > div.tree {
        position: fixed;
        width: 113px;
        height: 200px;
        border: 1px solid black;
        background: url("tree.jpg");
      }
    </style>
  </head>

  <html>

    <div id="isometric-scene">
      <div class="tree"></div>
      <div class="bg"></div>
      <div class="bg"></div>
      <div class="bg"></div>
      <div class="bg"></div>
      <div class="bg"></div>
      <div class="bg"></div>
      <div class="bg"></div>
      <div class="bg"></div>
      <div class="bg"></div>
      <div class="bg"></div>
      <div class="bg"></div>
      <div class="bg"></div>
      <div class="bg"></div>
      <div class="bg"></div>
      <div class="bg"></div>
      <div class="bg"></div>
      <div class="bg"></div>
      <div class="bg"></div>
      <div class="bg"></div>
      <div class="bg"></div>
      <div class="bg"></div>
      <div class="bg"></div>
      <div class="bg"></div>
      <div class="bg"></div>
      <div class="bg"></div>
      <div class="bg"></div>
      <div class="bg"></div>
      <div class="bg"></div>
      <div class="bg"></div>
      <div class="bg"></div>
      <div class="bg"></div>
      <div class="bg"></div>
      <div class="bg"></div>
      <div class="bg"></div>
      <div class="bg"></div>
      <div class="bg"></div>
      <div class="bg"></div>
      <div class="bg"></div>
      <div class="bg"></div>
      <div class="bg"></div>
      <div class="bg"></div>
      <div class="bg"></div>
      <div class="bg"></div>
      <div class="bg"></div>
      <div class="bg"></div>
      <div class="bg"></div>
      <div class="bg"></div>
      <div class="bg"></div>
      <div class="bg"></div>
      <div class="bg"></div>
      <div class="bg"></div>
      <div class="bg"></div>
      <div class="bg"></div>
      <div class="bg"></div>
      <div class="bg"></div>
      <div class="bg"></div>
      <div class="bg"></div>
      <div class="bg"></div>
      <div class="bg"></div>
      <div class="bg"></div>
      <div class="bg"></div>
      <div class="bg"></div>
      <div class="bg"></div>
      <div class="bg"></div>
      <div class="bg"></div>
      <div class="bg"></div>
      <div class="bg"></div>
      <div class="bg"></div>
      <div class="bg"></div>
      <div class="bg"></div>
      <div class="bg"></div>
      <div class="bg"></div>
      <div class="bg"></div>
      <div class="bg"></div>
    </div>

    <script>
      var things = {
        "tree1": {
          x: 500,
          y: 500,
          z: 1280, //when tree1 will be at 500, 500 on the screen

          angle: 30,
          speed: 2
        }
      };

      $(document).ready(function() {
        var $backgroundEls = $('#isometric-scene > div.bg'),
            $things = $('#isometric-scene > div:not(.bg)');

        /**
         * Set the position (and visibility) of the layer.
         *
         * s - The scroll offset of the window
         * x - starting x
         * y - starting y
         * z - time at which x,y will actually be there on the screen for realz
         * angle - the direction that $el is moving
         * $el - jQuery object of the element we're positioning
         */
        function setLayerPosition(s, x, y, z, angle, $el) {
          var yRate = 1
            , xRate = yRate * Math.tan(angle * Math.PI / 180)

            , xt = x + (z - s) * xRate
            , yt = y + (z - s) * yRate;

          $el.css({
            position: 'fixed',
            left: xt+'px',
            top:  yt+'px',
            zIndex: z
          });
        }

        // Init the background images
        $.each($backgroundEls, function(i, el) {
          var $el = $(el);
          setLayerPosition(0, 0, 0, ($el.height()*i), 45, $el);
        });

        $.each($things, function(i, el) {
          var $el = $(el);
          setLayerPosition(0, 500, 500, 1281, 45, $el);
        });

        var $window = $(window);
        // Adjust the position on scroll
        $(window).scroll(function() {
          var s = $window.scrollTop();
          console.log(s);
          $.each($backgroundEls, function(i, el) {
            var $el = $(el);
            setLayerPosition(s, 0, 0, ($el.height()*i), 45, $el);
          });

          $.each($things, function(i, el) {
            var $el = $(el);
            setLayerPosition(s, 500, 500, 1281, 45, $el);
          });

        });
      });
    </script>

  </html>
</html>
