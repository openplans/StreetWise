<html>
  <head>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>

    <style>
      body {
        background-color: SkyBlue;
        margin: 0px;
        padding: 0px;
      }

      #isometric-scene {
        position: relative;
        width: 100%;
        height: 2000px;
        overflow: hidden;
      }
      #isometric-scene > div {
        position: fixed;
        width: 300px;
        border: 1px solid black;
        display: none;
      }
    </style>
  </head>

  <html>

    <div id="isometric-scene">
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
      <div></div>
    </div>

    <script>
      $(document).ready(function() {
        var $layers = $('#isometric-scene > div');

        function setRandomHeight(elem) {
          $(elem).height(300);
        }

        function setRandomColor(elem) {
          var colors = ['red','green','blue','yellow','purple','grey','orange','brown']
            , i = Math.floor(Math.random() * colors.length);
          $(elem).css('background-color', colors[i]);
        }

        /**
         * Set the position (and visibility) of the layer.
         *
         * s - The scroll offset of the window
         * i - The index of the layer (greater is closer to the front)
         */
        function setLayerPosition(s, i, layer) {
          var xoffset = 300
            , yoffset = 100
            , xspacing = 100.0
            , yspacing = 50.0

            , x = xoffset + i*xspacing - (xspacing/yspacing)*s
            , y = yoffset + i*yspacing - s;

          if (x > xoffset && x < xoffset + 450) {
            $(layer).fadeIn('fast');
//            $(layer).show();
          } else {
            $(layer).fadeOut('fast');
//            $(layer).hide();
          }

          $(layer).css({left:x+'px', top:y+'px', position:'fixed'});
        }

        $.each($layers, function(i, layer) {
          setRandomHeight(layer);
          setRandomColor(layer);
          setLayerPosition(i, layer);
        });

        $(window).scroll(function() {
          var s = $(window).scrollTop();
          console.log(s);
          $.each($layers, function(i, layer) {
            setLayerPosition(s, i, layer);
          });
        });
      });
    </script>

  </html>
</html>
